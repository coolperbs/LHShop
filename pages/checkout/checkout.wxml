<view class="head-nav" ></view>

<view class="page-tips" wx:if="{{tradeInfo.tips}}">{{tradeInfo.tips}}</view>

<view class="content">
	<view class="order-info module">
		<view class="row">
			<view class="key">支付方式</view>
			<view class="value">{{tradeInfo.paymentTypeDesc}}</view>
		</view>
		<view class="row {{ tradeInfo.shipmentList.length > 1 ? 'ableclick' : '' }}">
			<view class="key">配送方式</view>
				<block wx:if="{{tradeInfo.shipmentList.length > 1}}">
					<picker class="value" mode="selector" value="1" range="{{tradeInfo.shipmentList}}" bindchange="changeShipment">
						<view>{{tradeInfo.currentShipment.name}}<image class="more" src="../../asset/arrow-right.png"></image></view>
					</picker>
				</block>
				<view class="value" wx:if="{{tradeInfo.shipmentList.length == 1}}">
					<view>{{tradeInfo.currentShipment.name}}</view>
				</view>
		</view>
		<navigator class="row ableclick" wx:if="{{tradeInfo.currentShipment.type == 1}}" url="../address/address">
			<view class="key">配送地址</view>
			<view class="value ellipsis-1">{{tradeInfo.addressShowName || '请填写收货信息'}}<image class="more" src="../../asset/arrow-right.png"></image></view>
		</navigator>
		<view class="row">
			<view class="key">取货时间</view>
			<view class="value">{{tradeInfo.currentShipment.timeDesc}}</view>
		</view>
	</view>

	<view class="item-list" wx:if="{{pageData.skus}}">
		<view class="module">
			<view class="list">
				<view class="item" wx:for="{{pageData.skus}}" wx:for-item="sku" wx:key="skuId">
					<image src="{{sku.mainImage}}"></image>
					<view class="item-info">
						<view class="name ellipsis-2">{{sku.title}}</view>
						<view class="sub-name ellipsis-2">
							{{sku.subTitle}}
						</view>
						<view class="price-info">
							<view class="price"><view class="sub">¥</view>{{sku.price ? sku.price / 100 : sku.originPrice / 100 }}</view>
							<view class="favo-info" wx:if="{{ sku.price }}">¥{{sku.originPrice / 100}}</view> 
						</view>
					</view>
					<view class="act">
						<view class="sub">x</view>{{sku.skuNum}}
					</view>
				</view>
			</view>
		</view>


		<view class="sum">
			<view class="row">
				<view class="key">商品金额</view>
				<view class="value">¥{{tradeInfo.modules.price.data.waresPriceStr}}</view>
			</view>
			<view class="row" wx:if="{{tradeInfo.modules.balance.data.availableStr}}">
				<view class="key">余额</view>
				<view class="value"><view class="sub">共¥{{ tradeInfo.modules.balance.data.total ? tradeInfo.modules.balance.data.totalStr : '0.00'}}，已抵扣</view>¥{{tradeInfo.modules.balance.data.availableStr}}</view>
			</view>
			<view class="row" catchtap="goCoupons">
				<view class="key">优惠券</view>
				<view class="value ellipsis-1">
					{{ tradeInfo.modules.coupon.data.currLabel }}
					<image class="more" src="../../asset/arrow-right.png">
				</image>
			</view>
			</view>
		</view>


		<view class="total">
			<!--<view class="sub-info">(已抵扣余额{{tradeInfo.modules.balance.data.availableStr}}元)</view>-->
			应付: <view class="price"><view class="sub">¥</view>{{ tradeInfo.modules.submit.data.payprice ? tradeInfo.modules.submit.data.paypriceStr : '0.00'}}</view>
		</view>
	</view>


</view>

<view class="waiting" wx:if="{{showLoading}}">
	<view class="box">
		<view class="status">
			<view class="loading">
				<image src="../../asset/loading.png"></image>
			</view>
			<view class="text">正在创建订单</view>
		</view>
		<view class="step">
			<view class="s {{ step >= 1 ? 'on' : '' }}">{{tradeInfo.shopName}}</view>
			<view class="s {{ step >= 2 ? 'on' : '' }}">{{tradeInfo.currentShipment.name}}</view>
			<view class="s {{ step >= 3 ? 'on' : '' }}">{{tradeInfo.currentShipment.timeDesc}}</view>
		</view>
	</view>
</view>

<view class="toolbar" wx:if="{{pageData}}">
	<view class="btn" catchtap="submit">
		<view class="text">立即支付</view>
		<view class="info">
			<view class="price">
				<view class="sub">¥</view>{{ pageData.totalPrice / 100 }}
			</view>
		</view>
		<view class="text">元</view>
	</view>
</view>
